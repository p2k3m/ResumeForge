
> resumeforge@1.0.0 test
> node --experimental-vm-modules node_modules/jest/bin/jest.js tests/verifyStaticDeployment.manifest.test.js

[baseline-browser-mapping] The data in this module is over two months old.  To ensure accurate Baseline data, please update: `npm i baseline-browser-mapping@latest -D`
(node:56207) ExperimentalWarning: VM Modules is an experimental feature. This feature could change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL tests/verifyStaticDeployment.manifest.test.js
  verify-static-deployment manifest logic
    ✕ correctly handles string entries in manifest.files (4 ms)
    ✕ correctly handles object entries in manifest.files (1 ms)

  ● verify-static-deployment manifest logic › correctly handles string entries in manifest.files

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"Key": "static/client/prod/latest/assets/index-123.js"}
    Received
           1: {}
           2: {}

    Number of calls: 2

      91 |         // Verify s3.send was called with correct keys
      92 |         expect(s3Mock.send).toHaveBeenCalledTimes(2)
    > 93 |         expect(s3Mock.send).toHaveBeenCalledWith(expect.objectContaining({
         |                             ^
      94 |             Key: 'static/client/prod/latest/assets/index-123.js'
      95 |         }))
      96 |         expect(s3Mock.send).toHaveBeenCalledWith(expect.objectContaining({

      at Object.toHaveBeenCalledWith (tests/verifyStaticDeployment.manifest.test.js:93:29)

  ● verify-static-deployment manifest logic › correctly handles object entries in manifest.files

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"Key": "static/client/prod/latest/assets/index-obj.js"}
    Received
           1: {}
           2: {}

    Number of calls: 2

      114 |         })
      115 |
    > 116 |         expect(s3Mock.send).toHaveBeenCalledWith(expect.objectContaining({
          |                             ^
      117 |             Key: 'static/client/prod/latest/assets/index-obj.js'
      118 |         }))
      119 |         expect(s3Mock.send).toHaveBeenCalledWith(expect.objectContaining({

      at Object.toHaveBeenCalledWith (tests/verifyStaticDeployment.manifest.test.js:116:29)

-------------------------------|---------|----------|---------|---------|-------------------
File                           | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
-------------------------------|---------|----------|---------|---------|-------------------
All files                      |       0 |        0 |       0 |       0 |                   
 ResumeForge                   |       0 |        0 |       0 |       0 |                   
  logger.js                    |       0 |        0 |       0 |       0 | 16-187            
  server.js                    |       0 |        0 |       0 |       0 | 30-26758          
 ResumeForge/lib               |       0 |        0 |       0 |       0 |                   
  buildMetadata.js             |       0 |        0 |       0 |       0 | 3-166             
  cloudfrontAssetCheck.js      |       0 |        0 |       0 |       0 | 3-896             
  cloudfrontAssetPrefixes.js   |       0 |        0 |       0 |       0 | 4-67              
  cloudfrontHealthCheck.js     |       0 |        0 |       0 |       0 | 4-120             
  handlebars.js                |       0 |      100 |       0 |       0 | 3-9               
  postDeploymentApiTests.js    |       0 |        0 |       0 |       0 | 4-93              
  retry.js                     |       0 |        0 |       0 |       0 | 1-172             
 ResumeForge/lib/cloudfront    |       0 |        0 |       0 |       0 |                   
  metadata.js                  |       0 |        0 |       0 |       0 | 3-219             
 ResumeForge/lib/deploy        |       0 |        0 |       0 |       0 |                   
  notifications.js             |       0 |        0 |       0 |       0 | 4-251             
 ResumeForge/lib/http          |       0 |        0 |       0 |       0 |                   
  parseEventBody.js            |       0 |        0 |       0 |       0 | 10-24             
 ResumeForge/lib/llm           |       0 |        0 |       0 |       0 |                   
  gemini.js                    |       0 |        0 |       0 |       0 | 5-254             
  templates.js                 |       0 |        0 |       0 |       0 | 1-109             
 ResumeForge/lib/logging       |       0 |        0 |       0 |       0 |                   
  attributes.js                |       0 |        0 |       0 |       0 | 2-195             
 ResumeForge/lib/observability |       0 |        0 |       0 |       0 |                   
  lambda.js                    |       0 |        0 |       0 |       0 | 7-984             
 ResumeForge/lib/pdf           |       0 |        0 |       0 |       0 |                   
  backstop.js                  |       0 |        0 |       0 |       0 | 3-169             
  index.js                     |       0 |        0 |       0 |       0 | 3-36              
  resume.js                    |       0 |        0 |       0 |       0 | 12-19             
  utils.js                     |       0 |        0 |       0 |       0 | 4-204             
 ResumeForge/lib/pdf/templates |       0 |        0 |       0 |       0 |                   
  2025.js                      |       0 |        0 |       0 |       0 | 11-1177           
 ResumeForge/lib/resume        |       0 |        0 |       0 |       0 |                   
  content.js                   |       0 |        0 |       0 |       0 | 8-1555            
  enhancement.js               |       0 |        0 |       0 |       0 | 8-445             
  jobEvaluation.js             |       0 |        0 |       0 |       0 | 9-120             
  parsing.js                   |       0 |        0 |       0 |       0 | 11-733            
  scoring.js                   |       0 |        0 |       0 |       0 | 14-819            
  skills.js                    |       0 |        0 |       0 |       0 | 8-143             
  utils.js                     |       0 |        0 |       0 |       0 | 11-18             
 ResumeForge/lib/scoring       |       0 |        0 |       0 |       0 |                   
  atsMetrics.js                |       0 |        0 |       0 |       0 | 1-956             
 ResumeForge/lib/static        |       0 |        0 |       0 |       0 |                   
  hashedIndexAssetRetention.js |       0 |        0 |       0 |       0 | 1-220             
  normalization.js             |       0 |        0 |       0 |       0 | 2-60              
 ResumeForge/lib/uploads       |       0 |        0 |       0 |       0 |                   
  metadata.js                  |       0 |        0 |       0 |       0 | 6-138             
  s3StreamingStorage.js        |       0 |        0 |       0 |       0 | 7-152             
-------------------------------|---------|----------|---------|---------|-------------------
Test Suites: 1 failed, 1 total
Tests:       2 failed, 2 total
Snapshots:   0 total
Time:        5.701 s
Ran all test suites matching /tests\/verifyStaticDeployment.manifest.test.js/i.
